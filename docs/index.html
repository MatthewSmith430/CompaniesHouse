<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract &amp; Process Companies House Data in R • CompaniesHouse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Extract &amp; Process Companies House Data in R">
<meta property="og:description" content="This package extracts firm information from Companies House (using the API). The package also provides tools to analyse this data, with a focus on creating interlocking directorates networks from the data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">CompaniesHouse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MatthewSmith430/CompaniesHouse/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="companies-house" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#companies-house" class="anchor"></a>Companies House</h1></div>
<p>This is an R package aimed at helping in extracting data from companies house: <a href="https://www.gov.uk/government/organisations/companies-house" class="uri">https://www.gov.uk/government/organisations/companies-house</a></p>
<p>It particular, it provides a way to search for companies and extract a set of company numbers. These company numbers can then be used to identify company directors.</p>
<p>This package also provides functions which allow you to build a network of interlocking directors, that is a network of individuals and the companies, linked by board membership. Other networks are also created - such as director networks, this is a set of individuals linked by sitting on (at least one of) the same company board of directors. Company networks - a set of companies linked by having (at least one of) the same directors sitting on the board.</p>
<p>To install follow these steps</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co">#Install CompaniesHouse:</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">devtools</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"MatthewSmith430/CompaniesHouse"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">CompaniesHouse</span>)</pre></div>
<div id="authorisation-key" class="section level2">
<h2 class="hasAnchor">
<a href="#authorisation-key" class="anchor"></a>Authorisation Key</h2>
<p>To extract data from companies house (with the API), you will need to get an authorisation key.</p>
<p>The instructions on how to obtain your key can be found at: <a href="https://developer.companieshouse.gov.uk/api/docs/index/gettingStarted/apikey_authorisation.html/" class="uri">https://developer.companieshouse.gov.uk/api/docs/index/gettingStarted/apikey_authorisation.html/</a></p>
<p>When using the package, save your key as <code>mkey</code>:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="no">mkey</span><span class="kw">&lt;-</span><span class="st">"ENTER YOUR AUTHORISATION KEY"</span></pre></div>
</div>
<div id="company-search" class="section level2">
<h2 class="hasAnchor">
<a href="#company-search" class="anchor"></a>Company Search</h2>
<p>The following function allows you to search for companies in Companies House (using the API). You use the search term with your authorisation key, and it returns a list of companies that match the search term. It also give the Companies House Company number, the company address and various other information. The company number is important, as it is used to identify the firm, and is used in many of the other package functions. There are three versions for this command:<br>
1. <code>CompanySearch_limit_first</code> This returns the first company from the search results<br>
2. <code>CompanySearch_limit</code> This return the first page of search results<br>
3. <code>CompanySearch</code> This returns all search results</p>
<p>In the following example I will use <code>CompanySearch_limit</code> (yet I will only display the first three results to save space)</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co">#Search for a "COMPANY SEARCH TERM"</span>
<span class="co">#In this example we use "unilever"</span>

<span class="no">CompanySearchList</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanySearch_limit.html">CompanySearch_limit</a></span>(<span class="st">"unilever"</span>,<span class="no">mkey</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>id.search.term</p>
</th>
<th style="text-align:left;">
<p>company.name</p>
</th>
<th style="text-align:left;">
<p>company.number</p>
</th>
<th style="text-align:left;">
<p>Date.of.Creation</p>
</th>
<th style="text-align:left;">
<p>company.type</p>
</th>
<th style="text-align:left;">
<p>company.status</p>
</th>
<th style="text-align:left;">
<p>address</p>
</th>
<th style="text-align:left;">
<p>Locality</p>
</th>
<th style="text-align:left;">
<p>postcode</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>unilever</p>
</td>
<td style="text-align:left;">
<p>UNILEVER PLC</p>
</td>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>1894-06-21</p>
</td>
<td style="text-align:left;">
<p>plc</p>
</td>
<td style="text-align:left;">
<p>active</p>
</td>
<td style="text-align:left;">
<p>Port Sunlight, Wirral, Merseyside, CH62 4ZD</p>
</td>
<td style="text-align:left;">
<p>Merseyside</p>
</td>
<td style="text-align:left;">
<p>CH62 4ZD</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>unilever</p>
</td>
<td style="text-align:left;">
<p>UNILEVER AUSTRALIA INVESTMENTS LIMITED</p>
</td>
<td style="text-align:left;">
<p>00137659</p>
</td>
<td style="text-align:left;">
<p>1914-09-12</p>
</td>
<td style="text-align:left;">
<p>ltd</p>
</td>
<td style="text-align:left;">
<p>active</p>
</td>
<td style="text-align:left;">
<p>Unilever House, 100 Victoria Embankment, London, EC4Y 0DY</p>
</td>
<td style="text-align:left;">
<p>London</p>
</td>
<td style="text-align:left;">
<p>EC4Y 0DY</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>unilever</p>
</td>
<td style="text-align:left;">
<p>UNILEVER AUSTRALIA PARTNERSHIP LIMITED</p>
</td>
<td style="text-align:left;">
<p>00315312</p>
</td>
<td style="text-align:left;">
<p>1936-06-17</p>
</td>
<td style="text-align:left;">
<p>ltd</p>
</td>
<td style="text-align:left;">
<p>active</p>
</td>
<td style="text-align:left;">
<p>Unilever House, 100 Victoria Embankment, London, EC4Y 0DY</p>
</td>
<td style="text-align:left;">
<p>London</p>
</td>
<td style="text-align:left;">
<p>EC4Y 0DY</p>
</td>
</tr>
</tbody>
</table>
</div>
<div id="extract-directors-data" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-directors-data" class="anchor"></a>Extract Directors Data</h2>
<p>This function extracts director information for a company numbers. Where it gives a dataframe containing a list of directors and director information for the company number. In this example, I will ouput a small selection of the directors from Unilever Plc.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co">#We conintue to use Uniever as a example, we know that the company</span>
<span class="co">#number for Unilever Plc is "00041424".</span>

<span class="co">#Therefore we can extract the director information</span>
<span class="co">#for Unilvever Plc</span>
<span class="no">DirectorInformation</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/company_ExtractDirectorsData.html">company_ExtractDirectorsData</a></span>(<span class="st">"00041424"</span>, <span class="no">mkey</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>company.id</p>
</th>
<th style="text-align:left;">
<p>director.id</p>
</th>
<th style="text-align:left;">
<p>directors</p>
</th>
<th style="text-align:left;">
<p>start.date</p>
</th>
<th style="text-align:left;">
<p>end.date</p>
</th>
<th style="text-align:left;">
<p>occupation</p>
</th>
<th style="text-align:left;">
<p>role</p>
</th>
<th style="text-align:left;">
<p>residence</p>
</th>
<th style="text-align:left;">
<p>postcode</p>
</th>
<th style="text-align:left;">
<p>nationality</p>
</th>
<th style="text-align:right;">
<p>birth.year</p>
</th>
<th style="text-align:right;">
<p>birth.month</p>
</th>
<th style="text-align:left;">
<p>former.name</p>
</th>
<th style="text-align:left;">
<p>download.date</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>i-a1nTc06VZikEBTLGW9DYwuANM</p>
</td>
<td style="text-align:left;">
<p>SOTAMAA, Ritva</p>
</td>
<td style="text-align:left;">
<p>2018-01-01</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>secretary</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>EC4Y 0DY</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:right;">
<p>NA</p>
</td>
<td style="text-align:right;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>NULL</p>
</td>
<td style="text-align:left;">
<p>2020-10-11</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>ZI4TtLjPrlcnIckJGNlqCLV2s_Y</p>
</td>
<td style="text-align:left;">
<p>ANDERSEN, Nils Smedegaard</p>
</td>
<td style="text-align:left;">
<p>2015-04-30</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>None</p>
</td>
<td style="text-align:left;">
<p>director</p>
</td>
<td style="text-align:left;">
<p>Denmark</p>
</td>
<td style="text-align:left;">
<p>EC4 0DY</p>
</td>
<td style="text-align:left;">
<p>Danish</p>
</td>
<td style="text-align:right;">
<p>1958</p>
</td>
<td style="text-align:right;">
<p>7</p>
</td>
<td style="text-align:left;">
<p>NULL</p>
</td>
<td style="text-align:left;">
<p>2020-10-11</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>E3FTMwTYyFn9_AXshohmRCws23c</p>
</td>
<td style="text-align:left;">
<p>CHA, Laura May Lung</p>
</td>
<td style="text-align:left;">
<p>2013-05-15</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>Deputy Chairman Hsbc Asia Pacific</p>
</td>
<td style="text-align:left;">
<p>director</p>
</td>
<td style="text-align:left;">
<p>Hong Kong</p>
</td>
<td style="text-align:left;">
<p>EC4Y 0DY</p>
</td>
<td style="text-align:left;">
<p>Chinese</p>
</td>
<td style="text-align:right;">
<p>1949</p>
</td>
<td style="text-align:right;">
<p>12</p>
</td>
<td style="text-align:left;">
<p>NULL</p>
</td>
<td style="text-align:left;">
<p>2020-10-11</p>
</td>
</tr>
</tbody>
</table>
<p>##Company Sector Code<br>
This function finds the sector a company operates in - where it gives its SIC code. The function requires the company number.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="co">#Again we use Unilever Plc as an example - using their company number</span>
<span class="no">CompanySIC</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanySIC.html">CompanySIC</a></span>(<span class="st">"00041424"</span>, <span class="no">mkey</span>)

<span class="no">CompanySIC</span></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>x</p>
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
<p>70100</p>
</td>
</tr></tbody>
</table>
</div>
<div id="director-information" class="section level2">
<h2 class="hasAnchor">
<a href="#director-information" class="anchor"></a>Director Information</h2>
<p>In <code>CompaniesHouse</code> you can also examine the boards that a director sits on, if you have the director id. The <code>indiv_ExtractDirectorsData</code> function returns a list of firms where the individual has served as a member of the board.</p>
<p>You can also search for directors by name - in a similar way to company searches. Where you can search by director name. Similar to the company search there are three options:<br>
1. <code>DirectorSearch_limit_first</code> This returns the first director from the search results<br>
2. <code>DirectorSearch_limit</code> This return the first page of search results<br>
3. <code>DirectorSearch</code> This returns all search results</p>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<p>An example of the director search function can be used for examining Boris Johnson and the firms he has previously acted as a director.</p>
<p>The first steps is to use the function to identify his director id. His date of birth is June 1964 - this information can be used to identify the correct person and id.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="co">##Use of make use of tidyverse package to process the dataframe</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="no">boris_search</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/DirectorSearch_limit.html">DirectorSearch_limit</a></span>(<span class="st">"boris johnson"</span>,<span class="no">mkey</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">month.of.birth</span><span class="kw">==</span><span class="fl">6</span> <span class="kw">&amp;</span>
           <span class="no">year.of.birth</span><span class="kw">==</span><span class="fl">1964</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>id.search.term</p>
</th>
<th style="text-align:left;">
<p>director.id</p>
</th>
<th style="text-align:left;">
<p>person.name</p>
</th>
<th style="text-align:left;">
<p>addess.snippet</p>
</th>
<th style="text-align:left;">
<p>locality</p>
</th>
<th style="text-align:right;">
<p>month.of.birth</p>
</th>
<th style="text-align:right;">
<p>year.of.birth</p>
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
<p>boris johnson</p>
</td>
<td style="text-align:left;">
<p>EZWa9WI6ur100VnMhfHT6EP4twA</p>
</td>
<td style="text-align:left;">
<p>Alexander Boris De Pfeffel JOHNSON</p>
</td>
<td style="text-align:left;">
<p>13 Furlong Road, London, N7 8LS</p>
</td>
<td style="text-align:left;">
<p>London</p>
</td>
<td style="text-align:right;">
<p>6</p>
</td>
<td style="text-align:right;">
<p>1964</p>
</td>
</tr></tbody>
</table>
<p>Now we have his id, we can extract the list of firms where he has been a director.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">boris_info</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/indiv_ExtractDirectorsData.html">indiv_ExtractDirectorsData</a></span>(<span class="no">boris_search</span>$<span class="no">director.id</span>,<span class="no">mkey</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>company.id</p>
</th>
<th style="text-align:left;">
<p>comapny.name</p>
</th>
<th style="text-align:left;">
<p>director.id</p>
</th>
<th style="text-align:left;">
<p>directors</p>
</th>
<th style="text-align:left;">
<p>director.forename</p>
</th>
<th style="text-align:left;">
<p>director.surname</p>
</th>
<th style="text-align:left;">
<p>start.date</p>
</th>
<th style="text-align:left;">
<p>end.date</p>
</th>
<th style="text-align:left;">
<p>occupation</p>
</th>
<th style="text-align:left;">
<p>role</p>
</th>
<th style="text-align:left;">
<p>residence</p>
</th>
<th style="text-align:left;">
<p>postcode</p>
</th>
<th style="text-align:left;">
<p>nationality</p>
</th>
<th style="text-align:right;">
<p>birth.year</p>
</th>
<th style="text-align:right;">
<p>birth.month</p>
</th>
<th style="text-align:left;">
<p>appointment.kind</p>
</th>
<th style="text-align:left;">
<p>download.date</p>
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
<p>05774105</p>
</td>
<td style="text-align:left;">
<p>FINLAND STATION LIMITED</p>
</td>
<td style="text-align:left;">
<p>EZWa9WI6ur100VnMhfHT6EP4twA</p>
</td>
<td style="text-align:left;">
<p>Alexander Boris De Pfeffel JOHNSON</p>
</td>
<td style="text-align:left;">
<p>Alexander</p>
</td>
<td style="text-align:left;">
<p>JOHNSON</p>
</td>
<td style="text-align:left;">
<p>2006-04-07</p>
</td>
<td style="text-align:left;">
<p>2008-05-23</p>
</td>
<td style="text-align:left;">
<p>Editor/Politician</p>
</td>
<td style="text-align:left;">
<p>director</p>
</td>
<td style="text-align:left;">
<p>NA</p>
</td>
<td style="text-align:left;">
<p>N7 8LS</p>
</td>
<td style="text-align:left;">
<p>British</p>
</td>
<td style="text-align:right;">
<p>1964</p>
</td>
<td style="text-align:right;">
<p>6</p>
</td>
<td style="text-align:left;">
<p>personal-appointment</p>
</td>
<td style="text-align:left;">
<p>11/10/2020 19:09:53</p>
</td>
</tr></tbody>
</table>
</div>
</div>
<div id="networks" class="section level2">
<h2 class="hasAnchor">
<a href="#networks" class="anchor"></a>Networks</h2>
<p>The package can be used to create a set of networks.<br>
- Interlocking directorates network: a set of companies and individuals, where individuals are tied to companies where they sit on the board of directors.<br>
- Director network: a set of directors, where they are linked if they sit on the same company board.<br>
- Company network: a set of companies, where they are linked if they share a director.</p>
<div id="create-networks" class="section level3">
<h3 class="hasAnchor">
<a href="#create-networks" class="anchor"></a>Create Networks</h3>
<p>The following functions create the various networks. Where a list of company numbers is required to create these networks.</p>
<div id="interlocking-directorates-network" class="section level4">
<h4 class="hasAnchor">
<a href="#interlocking-directorates-network" class="anchor"></a>Interlocking Directorates Network</h4>
<p>When creating the interlock network - you need to specify the years that you want to cover - a start year and end year There are two ways to create the interlocking directorates network:</p>
<p>1.) From a list of company numbers</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">INTERLOCKS1</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/InterlockNetwork.html">InterlockNetwork</a></span>(<span class="no">List.of.company.numbers</span>,<span class="no">mkey</span>)

<span class="co">##Example for all company numbers associated with the </span>
<span class="co">##Unilever search term for 2015 -2020 </span>
<span class="co">##The first steps is to remove companbies that are no longer active from the list, then create the interlock network </span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="no">COMP_LIST</span><span class="kw">&lt;-</span><span class="no">CompanySearchList</span><span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">company.status</span><span class="kw">==</span><span class="st">"active"</span>)

<span class="no">INTERLOCKS1</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/InterlockNetwork.html">InterlockNetwork</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
<p>2.) From a data frame produced using the <code>indiv_ExtractDirectorsData</code> function. This dataframe can be edited manually to use company names (or perhaps another id system) in the network.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">INTERLOCKS2</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/make_interlock.html">make_interlock</a></span>(<span class="no">DataFrame</span>)

<span class="co">##Example for all company numbers associated with the </span>
<span class="co">##Unilever search term - the dataframe created with indiv_ExtractDirectorsData</span>
<span class="no">INTERLOCKS2</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/make_interlock.html">make_interlock</a></span>(<span class="no">MultilpleDirectorInfo</span>)</pre></div>
</div>
<div id="company-network" class="section level4">
<h4 class="hasAnchor">
<a href="#company-network" class="anchor"></a>Company Network</h4>
<p>The next network that can be created with the <code>CompaniesHouse</code> package is the company network. This is a one-mode projection of th interlocking directorates network. It is a set of companies that are linked when they share a director.</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">CompanyNET</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanyNetwork.html">CompanyNetwork</a></span>(<span class="no">List.of.company.numbers</span>,<span class="no">mkey</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)

<span class="co">##Example for all company numbers associated with the </span>
<span class="co">##Unilever search term:</span>
<span class="no">CompanyNET</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanyNetwork.html">CompanyNetwork</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
</div>
<div id="director-network" class="section level4">
<h4 class="hasAnchor">
<a href="#director-network" class="anchor"></a>Director Network</h4>
<p>The next network that can be created with the <code>CompaniesHouse</code> package is the director network. This is a one-mode projection of the interlocking directorates network, but for directors instead of companies. It is a set of direcotrs that are linked when they share a sit on the same board.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">DirNET</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/DirectorNetwork.html">DirectorNetwork</a></span>(<span class="no">List.of.company.numbers</span>,<span class="no">mkey</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)

<span class="co">##Example for all company numbers associated with the </span>
<span class="co">##Unilever search term:</span>
<span class="no">DirNET</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/DirectorNetwork.html">DirectorNetwork</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
</div>
</div>
<div id="network-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#network-analysis" class="anchor"></a>Network Analysis</h3>
<p>The network (<code>igraph</code> object) is required for these functions. These are calculated using the commands from the “Create Networks” section.</p>
<div id="centrality" class="section level4">
<h4 class="hasAnchor">
<a href="#centrality" class="anchor"></a>Centrality</h4>
<p>For each network we can calculate a range of centrality measures. The director and company networks are one-mode networks, so a wider range of centrality measures can be calculated.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="no">INTERLOCKcent</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/InterlockCentrality.html">InterlockCentrality</a></span>(<span class="no">INTERLOCKS1</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<p>NAMES</p>
</th>
<th style="text-align:right;">
<p>Degree.Centrality</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:right;">
<p>20</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00137659</p>
</td>
<td style="text-align:left;">
<p>00137659</p>
</td>
<td style="text-align:right;">
<p>4</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00315312</p>
</td>
<td style="text-align:left;">
<p>00315312</p>
</td>
<td style="text-align:right;">
<p>4</p>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="r"><span class="no">COMPANYcent</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/one_mode_centrality.html">one_mode_centrality</a></span>(<span class="no">CompanyNET</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<p>name</p>
</th>
<th style="text-align:right;">
<p>Weighted.Degree</p>
</th>
<th style="text-align:right;">
<p>Binary.Degree</p>
</th>
<th style="text-align:right;">
<p>Betweenness</p>
</th>
<th style="text-align:right;">
<p>Closeness</p>
</th>
<th style="text-align:right;">
<p>Eigenvector</p>
</th>
<th style="text-align:left;">
<p>NAMES</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:left;">
<p>00041424</p>
</td>
<td style="text-align:right;">
<p>2</p>
</td>
<td style="text-align:right;">
<p>2</p>
</td>
<td style="text-align:right;">
<p>0.0000</p>
</td>
<td style="text-align:right;">
<p>0.0110</p>
</td>
<td style="text-align:right;">
<p>0.0018</p>
</td>
<td style="text-align:left;">
<p>00041424</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00137659</p>
</td>
<td style="text-align:left;">
<p>00137659</p>
</td>
<td style="text-align:right;">
<p>25</p>
</td>
<td style="text-align:right;">
<p>11</p>
</td>
<td style="text-align:right;">
<p>3.1333</p>
</td>
<td style="text-align:right;">
<p>0.0152</p>
</td>
<td style="text-align:right;">
<p>1.0000</p>
</td>
<td style="text-align:left;">
<p>00137659</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>00315312</p>
</td>
<td style="text-align:left;">
<p>00315312</p>
</td>
<td style="text-align:right;">
<p>25</p>
</td>
<td style="text-align:right;">
<p>11</p>
</td>
<td style="text-align:right;">
<p>3.1333</p>
</td>
<td style="text-align:right;">
<p>0.0152</p>
</td>
<td style="text-align:right;">
<p>1.0000</p>
</td>
<td style="text-align:left;">
<p>00315312</p>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb14"><pre class="r"><span class="no">DIRcent</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/one_mode_centrality.html">one_mode_centrality</a></span>(<span class="no">DirNET</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
<p>name</p>
</th>
<th style="text-align:right;">
<p>Weighted.Degree</p>
</th>
<th style="text-align:right;">
<p>Binary.Degree</p>
</th>
<th style="text-align:right;">
<p>Betweenness</p>
</th>
<th style="text-align:right;">
<p>Closeness</p>
</th>
<th style="text-align:right;">
<p>Eigenvector</p>
</th>
<th style="text-align:left;">
<p>NAMES</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>p9NWLNpKrF1rsf9hRuxo6j0YbJQ</p>
</td>
<td style="text-align:left;">
<p>p9NWLNpKrF1rsf9hRuxo6j0YbJQ</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>0.0012</p>
</td>
<td style="text-align:right;">
<p>0.9103</p>
</td>
<td style="text-align:left;">
<p>p9NWLNpKrF1rsf9hRuxo6j0YbJQ</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>bJK4sl0SPT-Zxzq88lC1ouqrtl8</p>
</td>
<td style="text-align:left;">
<p>bJK4sl0SPT-Zxzq88lC1ouqrtl8</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>0.0012</p>
</td>
<td style="text-align:right;">
<p>0.9103</p>
</td>
<td style="text-align:left;">
<p>bJK4sl0SPT-Zxzq88lC1ouqrtl8</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>-dJ_v_xnd71ByCzbr1g-uLqafak</p>
</td>
<td style="text-align:left;">
<p>-dJ_v_xnd71ByCzbr1g-uLqafak</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>19</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>0.0012</p>
</td>
<td style="text-align:right;">
<p>0.9103</p>
</td>
<td style="text-align:left;">
<p>-dJ_v_xnd71ByCzbr1g-uLqafak</p>
</td>
</tr>
</tbody>
</table>
</div>
<div id="network-properties" class="section level4">
<h4 class="hasAnchor">
<a href="#network-properties" class="anchor"></a>Network properties</h4>
<p>We can calculate the properties of the director and company networks.</p>
<div class="sourceCode" id="cb15"><pre class="r"><span class="no">COMPANYprop</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanyNetworkProperties.html">CompanyNetworkProperties</a></span>(<span class="no">CompanyNET</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
<p>One-Mode Company Network</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>Size</p>
</td>
<td style="text-align:right;">
<p>17.0000</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Density</p>
</td>
<td style="text-align:right;">
<p>0.4338</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Diameter</p>
</td>
<td style="text-align:right;">
<p>5.0000</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.path.lenth</p>
</td>
<td style="text-align:right;">
<p>1.7905</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.node.stregnth</p>
</td>
<td style="text-align:right;">
<p>6.1176</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.Degree</p>
</td>
<td style="text-align:right;">
<p>3.4706</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Betweenness.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.2502</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Closeness.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.1160</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Eigenvector.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.4333</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Degree.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.2537</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Clustering.coefficent.transitivity</p>
</td>
<td style="text-align:right;">
<p>0.8491</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Clustering.Weighted</p>
</td>
<td style="text-align:right;">
<p>0.9158</p>
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="r"><span class="no">DIRprop</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/DirectorNetworkProperties.html">DirectorNetworkProperties</a></span>(<span class="no">DirNET</span>)</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
<p>One-Mode Director Network</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>Size</p>
</td>
<td style="text-align:right;">
<p>66.0000</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Density</p>
</td>
<td style="text-align:right;">
<p>0.1716</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Diameter</p>
</td>
<td style="text-align:right;">
<p>6.0000</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.path.lenth</p>
</td>
<td style="text-align:right;">
<p>2.6284</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.node.stregnth</p>
</td>
<td style="text-align:right;">
<p>6.0606</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Average.Degree</p>
</td>
<td style="text-align:right;">
<p>5.5758</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Betweenness.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.3776</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Closeness.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.0298</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Eigenvector.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.7157</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Degree.Centralisation</p>
</td>
<td style="text-align:right;">
<p>0.3669</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Clustering.coefficent.transitivity</p>
</td>
<td style="text-align:right;">
<p>0.8848</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Clustering.Weighted</p>
</td>
<td style="text-align:right;">
<p>0.8231</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="plot-networks" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-networks" class="anchor"></a>Plot Networks</h3>
<p>The following function create plots of various networks. The TRUE/FALSE option indicates whether node labels should be included in the plots or not. The network plots are created from a list of company numbers for a quick inspection of the networks. There are a number of other commands and packages that can be used to create high quality network visualisations from the network objects in R. You can also specify the node size - in the following examples we use size 6.</p>
<div class="sourceCode" id="cb17"><pre class="r"><span class="fu"><a href="reference/InterlockNetworkPLOT.html">InterlockNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="fl">6</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
<p><img src="README_files/figure-markdown_github/INTERLOCK.png"></p>
<div class="sourceCode" id="cb18"><pre class="r"><span class="co">#Directors Plot</span>
<span class="fu"><a href="reference/DirectorNetworkPLOT.html">DirectorNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="fl">6</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
<p><img src="README_files/figure-markdown_github/DIRECTOR.png"></p>
<div class="sourceCode" id="cb19"><pre class="r"><span class="co">#Company Plot</span>
<span class="fu"><a href="reference/CompanyNetworkPLOT.html">CompanyNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,<span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="fl">6</span>,<span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></div>
<p><img src="README_files/figure-markdown_github/COMPANY.png"></p>
<p>You can also create grid plots - showing a plot of all three networks on a single grid using the <code>cowplot</code> library. In the example below we plot the networks in a grid, setting node size to degree centrality.</p>
<div class="sourceCode" id="cb20"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">cowplot</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">CompaniesHouse</span>)
<span class="co">##Create plot objects with node size based on centrality</span>
<span class="no">interlock.plot</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/InterlockNetworkPLOT.html">InterlockNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,
                                     <span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="st">"CENTRALITY"</span>,
                                     <span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)
<span class="no">director.plot</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/DirectorNetworkPLOT.html">DirectorNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,
                                   <span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="st">"CENTRALITY"</span>,
                                   <span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)
<span class="no">company.plot</span><span class="kw">&lt;-</span><span class="fu"><a href="reference/CompanyNetworkPLOT.html">CompanyNetworkPLOT</a></span>(<span class="no">COMP_LIST</span>$<span class="no">company.number</span>,
                                 <span class="no">mkey</span>,<span class="fl">FALSE</span>,<span class="kw">NodeSize</span> <span class="kw">=</span> <span class="st">"CENTRALITY"</span>,
                                 <span class="kw">start</span> <span class="kw">=</span> <span class="fl">2015</span>,<span class="kw">end</span> <span class="kw">=</span> <span class="fl">2020</span>)

<span class="co">##Plot as a grid</span>
<span class="fu"><a href="https://rdrr.io/pkg/cowplot/man/plot_grid.html">plot_grid</a></span>(<span class="no">interlock.plot</span>,<span class="no">director.plot</span>,<span class="no">company.plot</span>,
          <span class="kw">labels</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Interlocks"</span>,<span class="st">"Directors"</span>,<span class="st">"Companies"</span>))</pre></div>
<p><img src="README_files/figure-markdown_github/COWPLOT.png"></p>
</div>
</div>
<div id="additional-useful-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-useful-functions" class="anchor"></a>Additional useful functions</h2>
<div id="gender-information" class="section level3">
<h3 class="hasAnchor">
<a href="#gender-information" class="anchor"></a>Gender Information</h3>
<p>If your research require to examine the gender of directors, and how patterns of interlocking directorates differ for males and female, you will need additional information, as companies house does not provide gender information. However, there are a number of R packages that estimate the likelihood that a individual is male or female based on their first names. Although this is restricted to English first names, it still remains a useful tool to proxy gender information.</p>
<p>The available packages include <code>gender</code> and <code>genderize</code>. In the following example, we make use of the <code>genderize</code> package. We extract the gender information for all actors in the example Unilever director network, and then plot this network with the gender information.</p>
<p>This examples shows how you can identify gender for a network of directors where the director name is present. These commands cannot be directly to the object created by the <code>CompaniesHouse</code> package, as the directors are identified by their id only in this network.</p>
<div class="sourceCode" id="cb21"><pre class="r"><span class="co">##Load the relevant packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">igraph</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">intergraph</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">network</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">GGally</span>)
<span class="co">#devtools::install_github("kalimu/genderizeR")</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">genderizeR</span>)

<span class="co">##Create name dataframe from director network</span>
<span class="no">directornames</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">DirNET</span>)$<span class="no">name</span><span class="kw">%&gt;%</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">.</span>,<span class="kw">stringsAsFactors</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">directornames</span>)<span class="kw">&lt;-</span><span class="st">"Names"</span>

<span class="co">##Split the names into first and last names</span>
<span class="no">names.split</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">directornames</span>$<span class="no">Names</span>), <span class="st">","</span>)
<span class="no">name.last</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="no">names.split</span>, <span class="kw">function</span>(<span class="no">x</span>) <span class="no">x</span>[<span class="fl">1</span>])
<span class="no">name.first</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="no">names.split</span>, <span class="kw">function</span>(<span class="no">x</span>)
  <span class="co"># this deals with empty name slots in your original list, returning NA</span>
  <span class="kw">if</span>(<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">x</span>) <span class="kw">==</span> <span class="fl">0</span>) {
    <span class="fl">NA</span>
    } <span class="kw">else</span> <span class="kw">if</span> (<span class="no">x</span>[<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">x</span>)] <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Jr."</span>, <span class="st">"Jr"</span>, <span class="st">"Sr."</span>, <span class="st">"Sr"</span>,
                                 <span class="st">"Dr"</span>, <span class="st">" Dr"</span>, <span class="st">" Baron"</span>,<span class="st">"Dr."</span>, <span class="st">" Dr."</span>,
                                 <span class="st">"Professor"</span>, <span class="st">" Professor"</span>)) {
    <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">"[[:punct:]]"</span>, <span class="st">""</span>, <span class="no">x</span>[<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">x</span>) - <span class="fl">1</span>])

  } <span class="kw">else</span> {
    <span class="no">x</span>[<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">x</span>)]
  })

<span class="co">##Create new names dataframe</span>
<span class="no">nameDF</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">id</span><span class="kw">=</span><span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">name.first</span>),
                   <span class="kw">name.first</span><span class="kw">=</span><span class="no">name.first</span>,
                   <span class="kw">name.last</span><span class="kw">=</span><span class="no">name.last</span>)

<span class="no">nameDF</span>$<span class="no">name.first</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">nameDF</span>$<span class="no">name.first</span>)
<span class="no">nameDF</span>$<span class="no">name.first</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/trimws.html">trimws</a></span>(<span class="no">nameDF</span>$<span class="no">name.first</span>)
<span class="no">nameDF</span>$<span class="no">name.last</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">nameDF</span>$<span class="no">name.last</span>)

<span class="co">##Extract first word of first name vectors (as this can also include middle/multiple names etc)</span>
<span class="co">##This will be used as matching key later.</span>
<span class="no">name1</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">" .*"</span>, <span class="st">''</span>, <span class="no">nameDF</span>$<span class="no">name.first</span>)
<span class="no">nameDF</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="no">nameDF</span>,<span class="no">name1</span>)
<span class="no">nameDF</span>$<span class="no">name1</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">nameDF</span>$<span class="no">name1</span>)<span class="kw">%&gt;%</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>()

<span class="co">##Implement genderizeR</span>
<span class="no">xPrepared</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/genderizeR/man/textPrepare.html">textPrepare</a></span>(<span class="no">nameDF</span>$<span class="no">name.first</span>)
<span class="no">givenNames</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/genderizeR/man/findGivenNames.html">findGivenNames</a></span>(<span class="no">xPrepared</span>, <span class="kw">progress</span> <span class="kw">=</span> <span class="fl">FALSE</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">.</span>,<span class="kw">stringsAsFactors</span><span class="kw">=</span><span class="fl">FALSE</span>)

<span class="co">##From this create a gender-name key</span>
<span class="no">nameKEY</span><span class="kw">&lt;-</span><span class="no">givenNames</span>
<span class="no">nameKEY</span>$<span class="no">probability</span><span class="kw">&lt;-</span><span class="kw">NULL</span>
<span class="no">nameKEY</span>$<span class="no">count</span><span class="kw">&lt;-</span><span class="kw">NULL</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">nameKEY</span>)<span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"name1"</span>,<span class="st">"gender"</span>)

<span class="co">##Merge this will the director name dataframe</span>
<span class="no">nameDF</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">nameDF</span>, <span class="no">nameKEY</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"name1"</span>,<span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">nameDF</span>$<span class="no">name1</span><span class="kw">&lt;-</span><span class="kw">NULL</span>
<span class="no">nameDF</span>[<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">nameDF</span>)]<span class="kw">&lt;-</span><span class="st">"na"</span>

<span class="co">##Add these as igraph network attributes</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">DirNET</span>)$<span class="no">gender</span><span class="kw">&lt;-</span><span class="no">nameDF</span>$<span class="no">gender</span>
<span class="no">numericgender</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span>(<span class="no">nameDF</span>$<span class="no">gender</span>)<span class="kw">%&gt;%</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>() <span class="co">#Add numeric attribute</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">DirNET</span>)$<span class="no">gendernumeric</span><span class="kw">&lt;-</span><span class="no">numericgender</span>

<span class="co">##plot director network with gender information</span>
<span class="no">DIRnetwork</span><span class="kw">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/intergraph/man/asNetwork.html">asNetwork</a></span>(<span class="no">DirNET</span>)

<span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggnet2.html">ggnet2</a></span>(<span class="no">DIRnetwork</span>,<span class="kw">color.palette</span><span class="kw">=</span><span class="st">"Set1"</span>,
       <span class="kw">node.size</span><span class="kw">=</span><span class="fl">4</span>,<span class="kw">color.legend</span> <span class="kw">=</span> <span class="st">"Gender"</span>,
       <span class="kw">node.color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/vertex_attr.html">get.vertex.attribute</a></span>(<span class="no">DIRnetwork</span>,<span class="st">"gender"</span>),
       <span class="kw">label</span> <span class="kw">=</span> <span class="fl">FALSE</span>,<span class="kw">edge.color</span> <span class="kw">=</span>  <span class="st">"grey50"</span>,<span class="kw">arrow.size</span><span class="kw">=</span><span class="fl">0</span>)

<span class="co">####NOTE</span>
<span class="co">##This can implemented for other languages (not just english names), </span>
<span class="co">##if the following is implemented.</span>
<span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span>(<span class="st">"LC_ALL"</span>, <span class="st">"Polish"</span>) <span class="co">#Polish example</span>
<span class="co">##see the genderizeR documentation for further details</span></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/MatthewSmith430/CompaniesHouse/">https://​github.com/​MatthewSmith430/​CompaniesHouse/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MatthewSmith430/CompaniesHouse/issues">https://​github.com/​MatthewSmith430/​CompaniesHouse/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matthew Smith <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Matthew Smith.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
